(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{22:function(e,t,r){},45:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(1),c=r.n(a),i=r(15),s=r.n(i),o=(r(22),r(24)),l=r(25),u=r(30),d=r(29),j=r(5),h=function(e){return{type:"SET_CURRENT_USER",user:e}},p=Object(j.b)(null,{logout:function(){return function(e){return e({type:"CLEAR_CURRENT_USER"}),fetch("https://parallelogram-api.herokuapp.com/api/v1/logout",{credentials:"include",method:"DELETE"})}}})((function(e){var t=e.logout;return Object(n.jsx)("form",{onSubmit:t,children:Object(n.jsx)("input",{type:"submit",className:"input",value:"Log Out"})})})),b=r(6),m=Object(j.b)((function(e){var t=e.currentUser;return{currentUser:t,loggedIn:!!t}}))((function(e){var t=e.currentUser,r=e.loggedIn;return Object(n.jsxs)("div",{className:"Nav",children:[Object(n.jsx)("div",{className:"title",children:Object(n.jsx)(b.b,{to:"/",children:Object(n.jsx)("h1",{children:"Parallelogram"})})}),Object(n.jsxs)("div",{className:"left-nav",children:[Object(n.jsx)(b.b,{activeClassName:"selected",to:"/nature",children:"Nature"}),Object(n.jsx)(b.b,{activeClassName:"selected",to:"/technology",children:"Technology"}),Object(n.jsx)(b.b,{activeClassName:"selected",to:"/psychology",children:"Psychology"}),Object(n.jsx)(b.b,{activeClassName:"selected",to:"/philosophy",children:"Philosophy"})]}),Object(n.jsx)("div",{className:"right-nav",children:r?Object(n.jsxs)(n.Fragment,{children:[" ",Object(n.jsxs)("div",{className:"greeting",children:["Hi, ",t.attributes.username,"."]})," ",Object(n.jsx)(p,{})," "]}):Object(n.jsxs)(n.Fragment,{children:[" ",Object(n.jsx)(b.b,{to:"/login",children:"Log In"}),Object(n.jsx)(b.b,{to:"/signup",children:"Sign Up"})," "]})})]})})),O=r(4),f=function(e){return Object(n.jsxs)("div",{className:"Card",children:[Object(n.jsx)("div",{className:"card-photo",children:Object(n.jsx)(b.b,{to:"/articles/".concat(e.id),children:Object(n.jsx)("img",{src:"".concat(e.image_url),alt:"article"})})}),Object(n.jsx)("h1",{className:"card-title",children:Object(n.jsx)(b.b,{to:"/articles/".concat(e.id),children:e.title})}),Object(n.jsxs)("div",{className:"card-details",children:[e.author,Object(n.jsx)(b.b,{to:"/".concat(e.tag),children:e.tag})]}),Object(n.jsx)("div",{className:"card-summary",children:e.summary})]})},g=Object(j.b)((function(e){return{articles:e.articles.articles}}))((function(e){return(e.match.params.tag?e.articles.filter((function(t){return t.attributes.tag===e.match.params.tag})):e.articles).map((function(e){return Object(n.jsx)(f,{id:e.attributes.id,title:e.attributes.title,author:e.attributes.author,summary:e.attributes.summary,tag:e.attributes.tag,image_url:e.attributes.image_url},e.id)}))})),v=function(){var e=new Date,t=[];return t[0]="January",t[1]="February",t[2]="March",t[3]="April",t[4]="May",t[5]="June",t[6]="July",t[7]="August",t[8]="September",t[9]="October",t[10]="November",t[11]="December",Object(n.jsxs)(n.Fragment,{children:[t[e.getMonth()]," ",e.getFullYear()]})},x=function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"Issue",children:Object(n.jsx)(v,{})}),Object(n.jsx)("div",{className:"Grid",children:Object(n.jsx)(g,{history:e.history,location:e.location,match:e.match})})]})},y=r(13),N=Object(j.b)((function(e){return{loginFormData:e.loginForm}}),{updateLoginForm:function(e){return{type:"UPDATE_LOGIN_FORM",formData:e}},login:function(e,t){return function(r){return fetch("http://localhost:3001/api/v1/login",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.error?alert(e.error):(r(h(e.data)),r({type:"RESET_LOGIN_FORM"}),t.push("/"))})).catch(console.log)}}})((function(e){var t=e.loginFormData,r=e.updateLoginForm,a=e.login,c=e.history,i=function(e){var n=e.target,a=n.name,c=n.value,i=Object(O.a)(Object(O.a)({},t),{},Object(y.a)({},a,c));r(i)};return Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(t,c)},children:[Object(n.jsx)("input",{type:"text",className:"input-field",placeholder:"email",name:"email",value:t.email,onChange:i}),Object(n.jsx)("input",{type:"password",autoComplete:"off",className:"input-field",placeholder:"password",name:"password",value:t.password,onChange:i}),Object(n.jsx)("input",{type:"submit",value:"Log In"})]})})),_=Object(j.b)((function(e){return{signupFormData:e.signupForm}}),{updateSignupForm:function(e){return{type:"UPDATE_SIGNUP_FORM",formData:e}},signup:function(e,t){return function(r){var n={user:e};return fetch("http://localhost:3001/api/v1/signup",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){e.error?alert(e.error):(r(h(e.data)),r({type:"RESET_SIGNUP_FORM"}),t.push("/"))})).catch(console.log)}}})((function(e){var t=e.signupFormData,r=e.updateSignupForm,a=e.signup,c=e.history,i=function(e){var n=e.target,a=n.name,c=n.value,i=Object(O.a)(Object(O.a)({},t),{},Object(y.a)({},a,c));r(i)};return Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(t,c)},children:[Object(n.jsx)("input",{type:"text",className:"input-field",placeholder:"desired username",name:"username",value:t.username,onChange:i}),Object(n.jsx)("input",{type:"text",className:"input-field",placeholder:"email",name:"email",value:t.email,onChange:i}),Object(n.jsx)("input",{type:"password",autoComplete:"off",className:"input-field",placeholder:"password",name:"password",value:t.password,onChange:i}),Object(n.jsx)("input",{type:"submit",value:"Sign Up"})]})})),E=Object(j.b)((function(e){return{articles:e.articles.articles}}))((function(e){var t=e.articles.find((function(t){return t.id===e.id})),r=function(){return t.attributes};return Object(n.jsxs)("div",{className:"Article",children:[Object(n.jsx)("div",{className:"article-title",children:t&&r().title}),Object(n.jsx)("div",{className:"article-details",children:t&&r().author}),Object(n.jsx)("div",{className:"article-photo",children:Object(n.jsx)("img",{src:"".concat(t&&r().image_url),alt:"Parallelogram"})}),Object(n.jsx)("div",{className:"article-content",children:t&&r().content})]})})),S=Object(j.b)((function(e){var t=e.currentUser;return{currentUser:t,loggedIn:!!t,favorites:e.favorites,articles:e.articles.articles}}),{addFavorite:function(e,t){return function(r){return fetch("https://parallelogram-api.herokuapp.com/api/v1/favorites",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,article_id:t})}).then((function(e){return e.json()})).then((function(e){e.error?alert(e.error):r({type:"ADD_FAVORITE",favorite:e})})).catch(console.log)}}})((function(e){var t=e.loggedIn,r=e.addFavorite,a=e.currentUser,c=e.articleId,i=e.articles.find((function(e){return e.id===c}));return t?Object(n.jsxs)("div",{className:"Sidebar",children:[Object(n.jsx)("button",{className:"like",onClick:function(){r(a.id,c)},children:"\u2764"})," ",Object(n.jsx)("br",{}),i&&i.relationships.favorites.data.length]}):null})),F=function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(S,{articleId:e.match.params.id}),Object(n.jsx)(E,{id:e.match.params.id})]})},T=r(3),R=function(){return Object(n.jsx)("div",{className:"Main",children:Object(n.jsxs)(T.c,{children:[Object(n.jsx)(T.a,{exact:!0,path:"/",component:x}),Object(n.jsx)(T.a,{exact:!0,path:"/login",component:N}),Object(n.jsx)(T.a,{exact:!0,path:"/signup",component:_}),Object(n.jsx)(T.a,{exact:!0,path:"/articles/:id",render:function(e){return Object(n.jsx)(F,Object(O.a)({},e))}}),Object(n.jsx)(T.a,{exact:!0,path:"/:tag",render:function(e){return Object(n.jsx)(x,Object(O.a)({},e))}})]})})},C=function(){return Object(n.jsxs)("div",{className:"Footer",children:["Parallelogram Magazine / ",Object(n.jsx)(v,{})]})},D=function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.props.getCurrentUser(),this.props.getArticles()}},{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(m,{}),Object(n.jsx)(R,{}),Object(n.jsx)(C,{})]})}}]),r}(c.a.Component),U=Object(T.f)(Object(j.b)((function(e){return{loggedIn:!!e.currentUser}}),{getCurrentUser:function(){return function(e){return fetch("https://parallelogram-api.herokuapp.com/api/v1/get_current_user",{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){t.error?alert(t.error):e(h(t.data))})).catch(console.log)}},getArticles:function(){return function(e){return fetch("https://parallelogram-api.herokuapp.com/api/v1/get_articles",{credentials:"include",method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){t.error?alert(t.error):e({type:"ADD_ARTICLES",articles:t.data})})).catch(console.log)}}})(D)),I=r(11),A=r(16),w={email:"",password:""},P={username:"",email:"",password:""},L={articles:[]},M=r(28),G=Object(I.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type,e},currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return t.user;case"CLEAR_CURRENT_USER":return null;case"ADD_FAVORITE":return Object(O.a)(Object(O.a)({},e),{},{relationships:Object(O.a)(Object(O.a)({},e.relationships),{},{favorites:Object(O.a)(Object(O.a)({},e.relationships.favorites),{},{data:[].concat(Object(A.a)(e.relationships.favorites.data),[t.favorite])})})});default:return e}},loginForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_LOGIN_FORM":return t.formData;case"RESET_LOGIN_FORM":return w;default:return e}},signupForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SIGNUP_FORM":return t.formData;case"RESET_SIGNUP_FORM":return P;default:return e}},articles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARTICLES":return Object(O.a)(Object(O.a)({},e),{},{articles:t.articles});case"ADD_FAVORITE":var r=e.articles.find((function(e){return e.id==t.favorite.data.attributes.article_id}));r.relationships.favorites.data=[].concat(Object(A.a)(r.relationships.favorites.data),[t.favorite]);var n=e.articles.map((function(e){return e.id==r.id?r:e}));return{articles:n};default:return e}}}),k=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||I.d,J=Object(I.e)(G,k(Object(I.a)(M.a)));s.a.render(Object(n.jsx)(j.a,{store:J,children:Object(n.jsx)(b.a,{children:Object(n.jsx)(U,{})})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.581919f1.chunk.js.map